<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VY5J8Z79QE"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-VY5J8Z79QE');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="트럭에 치였다면 어디로 갈까? 당신의 이세계 환생 등급과 능력을 확인하세요. 로맨스 판타지, 무협, 헌터물 등 32가지 세계관 완벽 분석.">
    <meta name="keywords" content="이세계, 환생, 심리테스트, MBTI, 웹소설, 로판, 무협, 판타지, 이세계아이돌, 웹툰, 상태창, 등급테스트, isekai">
    <meta name="author" content="Isekai Ticket Agency">
    <meta name="robots" content="index, follow">

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🚚</text></svg>">
    
    <title>Isekai Ticket Agency</title> 
    <meta property="og:type" content="website">
    <meta property="og:title" content="이세계 환생 티켓 발급소 🎫">
    <meta property="og:description" content="당신이 떨어질 세계와 능력을 확인하세요.">
    <meta property="og:image" content="https://isekai-9ls.pages.dev/img/og_thumb.jpg">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🚚</text></svg>">
</head>
<body>

    <div class="container">
        
        <div class="lang-selector">
            <button class="lang-btn active" onclick="setLanguage('ko')">
                <img src="img/flag_kr.png" alt="KR" class="flag-icon"> KO
            </button>
            <button class="lang-btn" onclick="setLanguage('en')">
                <img src="img/flag_us.png" alt="EN" class="flag-icon"> EN
            </button>
            <button class="lang-btn" onclick="setLanguage('ja')">
                <img src="img/flag_jp.png" alt="JP" class="flag-icon"> JP
            </button>
        </div>

        <section id="intro-screen">
            <h1 class="title" id="ui-title">이세계행<br>편도 티켓 발급소</h1>
            <p class="subtitle" id="ui-subtitle">당신이 떨어질 세계와 능력을 확인하세요.</p>
            
            <div class="input-form">
                <label id="ui-label-name">여행자 이름</label>
                <input type="text" id="user-name" placeholder="이름을 입력하세요">
                
                <label id="ui-label-gender">성별</label>
                <div class="btn-group">
                    <button class="gender-btn" id="btn-male" onclick="selectGender('male', this)">남성</button>
                    <button class="gender-btn" id="btn-female" onclick="selectGender('female', this)">여성</button>
                </div>
                <input type="hidden" id="selected-gender">

                <label id="ui-label-stress">현재 가장 큰 스트레스는?</label>
                <select id="stress-cause">
                    </select>

                <button class="submit-btn" id="ui-btn-submit" onclick="issueTicket()">티켓 발급하기</button>
            </div>

            <section class="info-section" style="max-width: 600px; margin: 50px auto; color: #aaa; font-size: 0.8rem; line-height: 1.6; text-align: left; padding: 20px;">
                <h3 style="color: #fff; border-bottom: 1px solid #444; padding-bottom: 5px;">🧙‍♂️ 이용 가이드 & 세계관 설정</h3>
                <p>
                    <strong>Q. 결과는 랜덤인가요?</strong><br>
                    A. 아니요. '이세계 티켓 발급소'는 이름과 성별, 스트레스 요인을 분석하여 고유한 해시 알고리즘을 통해 운명을 결정합니다. 동일한 정보를 입력하면 전 세계 어디서든 동일한 결과가 나옵니다. 단, '다시 태어나기(Re-roll)'를 선택하면 운명을 비틀어 새로운 결과를 얻을 수 있습니다.
                </p>
                <p>
                    <strong>Q. 어떤 세계가 있나요?</strong><br>
                    A. 로맨스 판타지의 '북부 대공 성'부터 무협지의 '화산파', 현대 판타지의 '헌터 길드', 그리고 아포칼립스 세계관까지 총 32종 이상의 다양한 차원이 준비되어 있습니다. 당신의 적성에 맞는 최적의 세계로 안내해 드립니다.
                </p>
                <p>
                    <strong>Q. 등급은 어떻게 정해지나요?</strong><br>
                    A. SSS급부터 F급까지 존재하며, 이는 순전히 당신의 '영혼의 운'에 달려있습니다. 하지만 F급이라고 실망하지 마세요. 히든 스킬을 통해 역전을 노릴 수 있으니까요.
                </p>
            </section>
        </section>

        <section id="loading-screen" class="hidden">
            <div class="truck-icon">🚚💨</div>
            <p id="loading-text">이세계 트럭 시동 거는 중...</p>
        </section>

        <section id="result-screen" class="hidden">
            <div class="ticket-frame">
                <div class="holo-overlay"></div>
                <div class="ticket-header">
                    <span>ISEKAI ID CARD</span>
                    <span class="ticket-no">No. 2026-001</span>
                </div>

                <div class="visual-area">
                    <div id="bg-layer" class="layer"></div>
                    <div id="char-layer" class="layer"></div>
                    <div class="user-photo-placeholder">PHOTO</div>
                </div>

                <div class="status-window">
                    <h2 id="res-char-name">캐릭터명</h2>
                    <div class="rank-badge" id="res-rank">RANK</div>
                    
                    <div class="info-row">
                        <span class="label" id="ui-res-name">이름</span>
                        <span class="value" id="res-user-name"></span>
                    </div>
                    
                    <hr class="divider">

                    <div class="info-block">
                        <span class="label" id="ui-res-world">🌏 소환된 세계</span>
                        <p class="desc" id="res-world"></p>
                    </div>

                    <div class="info-block">
                        <span class="label" id="ui-res-skill">⚡ 보유 능력</span>
                        <div class="skill-box">
                            <span class="skill-rank" id="res-skill-rank"></span>
                            <span class="skill-name" id="res-skill-name"></span>
                        </div>
                        <p class="desc" id="res-skill-desc"></p>
                    </div>

                    <div class="info-block">
                        <span class="label" id="ui-res-reason">📨 소환 사유</span>
                        <p class="desc reason-text" id="res-reason"></p>
                    </div>
                    
                    <div class="return-prob">
                        <span id="ui-res-prob">현실 복귀 확률:</span> <span id="prob-value"></span>
                    </div>
                </div>

                <div class="hidden-section blur" id="hidden-area">
                    <div class="locked-msg" id="ui-locked-msg">
                        🔒<br>결과를 공유하고<br>동료와 히든 스킬 확인하기
                    </div>
                    <div class="unlocked-content">
                        <h3 id="ui-hidden-title">🎁 동반자 & 히든 스킬</h3>
                        <div class="partner-box">
                            <div class="partner-img-placeholder">?</div>
                            <div class="partner-info">
                                <span class="partner-name" id="res-partner"></span>
                                <p class="partner-desc desc" id="res-partner-desc"></p>
                            </div>
                        </div>
                        <div class="hidden-skill">
                            <span class="skill-name" id="res-awake-skill"></span>
                            <p class="desc" id="res-awake-desc"></p>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="save-btn" id="ui-btn-save" onclick="saveTicket()">📸 티켓 저장하기</button>
                    <button class="share-btn" id="ui-btn-share" onclick="shareResult()">친구에게 자랑하고 잠금해제</button>
                    <button class="retry-btn" id="ui-btn-retry" onclick="retry()">다시 태어나기 (Re-roll)</button>
                </div>

                <div class="ticket-watermark">
                    isekai-9ls.pages.dev • © 2026 Isekai Ticket Agency
                </div>
            </div>
        </section>
       
        <footer class="site-footer">
            <a href="privacy.html" style="color: rgba(255,255,255,0.5); text-decoration: none; margin-right: 10px;">개인정보처리방침</a>
            <span>|</span>
            <span style="margin-left: 10px;">© 2026 Isekai Ticket Agency.</span>
            <br>
            <span style="font-size: 0.6rem; color: rgba(255,255,255,0.3);">This service is for entertainment purposes only.</span>
        </footer>
    </div>

    <audio id="sfx-truck" src="audio/truck_horn.mp3" preload="auto"></audio>
    <audio id="sfx-result" src="audio/level_up.mp3" preload="auto"></audio>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>